# TSPredIT — Integrated Tuning for Time Series Prediction

- Authors: Rodrigo Salles, Esther Pacitti, Edmundo Bezerra, Carlos Marques, Carlos Pacheco, Carlos Oliveira, Fábio Porto, Eduardo Ogasawara
- Category: Experiments / Reproducibility

---

## Overview
This folder contains experiments and scripts related to the paper:

Salles, R., Pacitti, E., Bezerra, E., Marques, C., Pacheco, C., Oliveira, C., Porto, F., Ogasawara, E. (2023). TSPredIT: Integrated Tuning of Data Preprocessing and Time Series Prediction Models. Lecture Notes in Computer Science.

Objective: evaluate a workflow that integrates the tuning of preprocessing (filters, normalization, augmentation, window sizes) and forecasters (ARIMA, MLP, ELM, SVM, RF, Conv1D), using rolling-origin evaluation and didactic visualizations.

---

## What’s Here
- Data builder: [carrega.R](carrega.R) (now documented in English)
- Core workflow helpers: [wf_experiment.R](wf_experiment.R)
- Model workflows: [wf_arima.R](wf_arima.R), [wf_mlp.R](wf_mlp.R), [wf_elm.R](wf_elm.R), [wf_lstm.R](wf_lstm.R), [wf_svm.R](wf_svm.R), [wf_rf.R](wf_rf.R), [wf_conv1d.R](wf_conv1d.R)
- Analysis: [analysis_preproc.R](analysis_preproc.R) (preprocessing/augmentation plots), [analysis.R](analysis.R) (metric pivots and mp4)
- Data: [data/fertilizers.RData](data/fertilizers.RData) (built by 1-load step)
- Inputs: [input/](input/) (FAO datasets and codes)
- Saved examples: [saved/](saved/) (reference results)
- Legacy overview: [README.md](README.md) (very short; this `readme.md` is the canonical guide)

Images
- Preprocessing: `tspredit/preprocess.png`
- Augmentation: `tspredit/augment.png`
- Methods: `tspredit/method.png`

---

## Experiment Structure (semantic numbering)
Use the numbered entry points below to run the pipeline end-to-end. The legacy `wf_*.R` files remain and are referenced by wrappers.

1-load_data: dataset ingestion and saving
- [1-load_data.R](1-load_data.R) — sources [carrega.R](carrega.R) and writes [data/fertilizers.RData](data/fertilizers.RData).

2-preprocessing: cleaning and alignment
- Preprocessing strategies are configured inside workflows via `params$preprocess`.

3-configuration: experiment parameters (inside each `wf_*.R`)
- Set `sw_size`, `input_size`, `ranges`, and augmentation.

4-modeling: forecasting models
- ARIMA: [4-modeling_arima.R](4-modeling_arima.R) (wraps [wf_arima.R](wf_arima.R))
- MLP: [4-modeling_mlp.R](4-modeling_mlp.R) (wraps [wf_mlp.R](wf_mlp.R))
- ELM: [4-modeling_elm.R](4-modeling_elm.R) (wraps [wf_elm.R](wf_elm.R))
- LSTM: [4-modeling_lstm.R](4-modeling_lstm.R) (wraps [wf_lstm.R](wf_lstm.R))
- SVM: [4-modeling_svm.R](4-modeling_svm.R) (wraps [wf_svm.R](wf_svm.R))
- Random Forest: [4-modeling_rf.R](4-modeling_rf.R) (wraps [wf_rf.R](wf_rf.R))
- Conv1D: [4-modeling_conv1d.R](4-modeling_conv1d.R) (wraps [wf_conv1d.R](wf_conv1d.R))

5-evaluation: metrics and visual analysis
- Preproc/Augment figures: [5-evaluation_analysis_preproc.R](5-evaluation_analysis_preproc.R) (wraps [analysis_preproc.R](analysis_preproc.R))
- Metric pivots and mp4 helper: [5-evaluation_analysis.R](5-evaluation_analysis.R) (wraps [analysis.R](analysis.R))

6-reporting: figures and tables
- Use images in `graphics/` generated by the `wf_*` scripts and analysis scripts.

Notes
- All code, filenames, and comments are in English with short, didactic explanations.
- No Jupyter notebooks are present; if you add any, also export to Markdown with the same numbering (e.g., `4-modeling_mlp.md`).

---

## How to Run (examples)
- Build data: `Rscript tspredit/1-load_data.R`
- Run ARIMA baseline: `Rscript tspredit/4-modeling_arima.R`
- Run MLP experiments: `Rscript tspredit/4-modeling_mlp.R`
- Run ELM experiments: `Rscript tspredit/4-modeling_elm.R`
- Run LSTM experiments: `Rscript tspredit/4-modeling_lstm.R`
- Run SVM experiments: `Rscript tspredit/4-modeling_svm.R`
- Run RF experiments: `Rscript tspredit/4-modeling_rf.R`
- Run Conv1D experiments: `Rscript tspredit/4-modeling_conv1d.R`
- Generate preprocessing and augmentation figures: `Rscript tspredit/5-evaluation_analysis_preproc.R`

Prerequisites
- R with `daltoolbox` and `tspredit` installed, plus plotting deps (`ggplot2`, `RColorBrewer`, `reshape`).

---

## Citation
If you use or extend these experiments, please cite:

Salles, R., Pacitti, E., Bezerra, E., Marques, C., Pacheco, C., Oliveira, C., Porto, F., Ogasawara, E. (2023). TSPredIT: Integrated Tuning of Data Preprocessing and Time Series Prediction Models. Lecture Notes in Computer Science.
